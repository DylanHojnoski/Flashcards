{"ast":null,"code":"import _asyncToGenerator from \"/home/dylanh/Documents/CodeProjects/Flashcards/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { User } from 'src/app/models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction AccountComponent_div_1_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function AccountComponent_div_1_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.toggleEdit());\n    });\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AccountComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 2);\n    i0.ɵɵtemplate(6, AccountComponent_div_1_button_6_Template, 2, 0, \"button\", 3);\n    i0.ɵɵelementStart(7, \"button\", 4);\n    i0.ɵɵtext(8, \"Logout\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Username: \", ctx_r0.currentUser.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Email: \", ctx_r0.currentUser.email, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.editActive);\n  }\n}\n\nfunction AccountComponent_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Username already taken \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AccountComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function AccountComponent_div_2_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.editUser.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, AccountComponent_div_2_div_2_Template, 2, 0, \"div\", 0);\n    i0.ɵɵelementStart(3, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function AccountComponent_div_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.saveEdit(ctx_r8.editUser));\n    });\n    i0.ɵɵtext(4, \"Save\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.editUser.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.nameTaken);\n  }\n}\n\nexport class AccountComponent {\n  constructor(userService) {\n    this.userService = userService;\n    this.currentUser = new User();\n    this.editUser = new User();\n    this.existingUser = [];\n    this.editActive = false;\n    this.nameTaken = false;\n    this.emailTaken = false;\n  }\n\n  ngOnInit() {\n    this.userService.GetCurrentUser().subscribe(result => this.currentUser = result);\n    this.editUser = this.currentUser;\n  }\n\n  toggleEdit() {\n    this.editActive = !this.editActive;\n  }\n\n  getUserName(user) {\n    let existingUser;\n    this.userService.GetUserByName(user).subscribe(result => {\n      existingUser = result;\n    });\n    return new Promise(resolve => {\n      resolve(existingUser);\n    });\n  }\n\n  saveEdit(user) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (user.name == \"\" && user.email == \"\") {\n        return;\n      }\n\n      let userFound = true;\n      let existingUser = yield _this.getUserName(user);\n\n      if (existingUser == undefined) {\n        userFound = false;\n      }\n\n      console.log(\"Exisitng user\");\n      console.log(existingUser);\n      console.log(userFound);\n\n      if (userFound) {\n        _this.nameTaken = true;\n        console.log(\"name taken\");\n        _this.editUser = new User();\n        return;\n      }\n\n      _this.editUser.id = _this.currentUser.id;\n      _this.editUser.email = _this.currentUser.email;\n\n      _this.userService.UpdateUser(_this.editUser).subscribe();\n\n      console.log(\"updated\");\n      _this.currentUser.name = _this.editUser.name;\n      _this.editUser = new User();\n      _this.nameTaken = false;\n\n      _this.toggleEdit();\n    })();\n  }\n\n}\n\nAccountComponent.ɵfac = function AccountComponent_Factory(t) {\n  return new (t || AccountComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n};\n\nAccountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AccountComponent,\n  selectors: [[\"app-account\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [\"class\", \"bg-slate-200 rounded-md m-1 p-1 w-min\", 4, \"ngIf\"], [1, \"flex\", \"flex-row\", \"flex-wrap\"], [\"class\", \"m-1 block justify-self-end rounded-md bg-slate-400 p-1 font-semibold text-slate-100 hover:bg-slate-600\", 3, \"click\", 4, \"ngIf\"], [1, \"m-1\", \"rounded-md\", \"bg-red-200\", \"p-1\", \"leading-tight\", \"hover:bg-red-400\"], [1, \"m-1\", \"block\", \"justify-self-end\", \"rounded-md\", \"bg-slate-400\", \"p-1\", \"font-semibold\", \"text-slate-100\", \"hover:bg-slate-600\", 3, \"click\"], [1, \"bg-slate-200\", \"rounded-md\", \"m-1\", \"p-1\", \"w-min\"], [\"type\", \"text\", \"name\", \"username\", \"placeholder\", \"Username\", 1, \"m-1\", \"rounded-md\", \"bg-slate-50\", \"p-1\", 3, \"ngModel\", \"ngModelChange\"]],\n  template: function AccountComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtemplate(1, AccountComponent_div_1_Template, 9, 3, \"div\", 0);\n      i0.ɵɵtemplate(2, AccountComponent_div_2_Template, 5, 2, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editActive);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.editActive);\n    }\n  },\n  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["User","i0","AccountComponent","constructor","userService","ngOnInit","GetCurrentUser","subscribe","result","currentUser","editUser","toggleEdit","editActive","getUserName","user","existingUser","GetUserByName","Promise","resolve","saveEdit","name","email","userFound","undefined","console","log","nameTaken","id","UpdateUser","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/dylanh/Documents/CodeProjects/Flashcards/ClientApp/src/app/components/account/account.component.ts","/home/dylanh/Documents/CodeProjects/Flashcards/ClientApp/src/app/components/account/account.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { User } from 'src/app/models/user';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-account',\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css']\n})\nexport class AccountComponent implements OnInit {\n  currentUser: User = new User;\n  editUser: User = new User;\n  existingUser: User[] = []; \n  constructor(private userService: UserService) { }\n  editActive = false;\n  nameTaken = false;\n  emailTaken = false;\n\n  ngOnInit(): void {\n    this.userService.GetCurrentUser().subscribe(result => this.currentUser = result);\n    this.editUser = this.currentUser;\n  }\n\n  toggleEdit() {\n    this.editActive = !this.editActive;\n  }\n\n  getUserName(user: User): Promise<User> {\n      let existingUser: User;\n      this.userService.GetUserByName(user).subscribe(result => {existingUser = result});\n      return new Promise<User>(resolve => {resolve(existingUser)});\n  }\n\n  async saveEdit(user: User) {\n      if (user.name == \"\" && user.email == \"\") {\n          return;\n      }\n      let userFound = true;\n\n      let existingUser = await this.getUserName(user)\n      if (existingUser == undefined) {\n          userFound = false;\n      }\n      console.log(\"Exisitng user\")\n      console.log(existingUser)\n      console.log(userFound)\n      if (userFound) {\n          this.nameTaken = true;\n          console.log(\"name taken\")\n          this.editUser = new User;\n          return;\n      }\n      this.editUser.id = this.currentUser.id;\n      this.editUser.email = this.currentUser.email;\n      this.userService.UpdateUser(this.editUser).subscribe();\n      console.log(\"updated\");\n      this.currentUser.name = this.editUser.name;\n      this.editUser = new User;\n      this.nameTaken = false;\n\n      this.toggleEdit();\n  }\n\n}\n","<div>\n    <div *ngIf=\"!editActive\">\n        <div>\n            Username: {{currentUser.name}} \n        </div>\n        <div>\n            Email: {{currentUser.email}} \n        </div>\n        <div class=\"flex flex-row flex-wrap\">\n            <button *ngIf=\"!editActive\" (click)=\"toggleEdit()\" class=\"m-1 block justify-self-end rounded-md bg-slate-400 p-1 font-semibold text-slate-100 hover:bg-slate-600\">Edit</button>\n            <button class=\"m-1 rounded-md bg-red-200 p-1 leading-tight hover:bg-red-400\">Logout</button> \n        </div>\n    </div> \n    <div *ngIf=\"editActive\" class=\"bg-slate-200 rounded-md m-1 p-1 w-min\">\n        <input [(ngModel)]=\"editUser.name\" type=\"text\" name=\"username\" placeholder=\"Username\" class=\"m-1 rounded-md bg-slate-50 p-1\">\n        <div *ngIf=\"nameTaken\">\n            Username already taken\n        </div>\n        <button (click)=\"saveEdit(editUser)\" class=\"m-1 block justify-self-end rounded-md bg-slate-400 p-1 font-semibold text-slate-100 hover:bg-slate-600\">Save</button>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}